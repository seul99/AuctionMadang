<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 관리</title>
    <link rel="stylesheet" href="/css/ProductManagement.css">
</head>
<body>
<div class="container">
    <!-- 헤더 -->
    <header class="header">
        <div class="logo">경매마당</div>
        <nav class="nav">
            <div class="nav-icon-item">
                <a href="/" th:href="@{/}"><img src="/images/home.svg" alt="home" width="30px" /></a>
            </div>
            <div class="nav-item"><a href="/itemlist" th:href="@{/api/product/productList}">상품목록</a></div>
            <div class="nav-item"><a href="/gosell" th:href="@{/api/product/createProduct}">판매하기</a></div>
            <div class="nav-item"><a href="/mypage" th:href="@{/api/user/myPage}">마이페이지</a></div>
            <div class="nav-item"><a href="/customercenter" th:href="@{/api/customer/notice}">고객센터</a></div>
        </nav>
        <div class="btn-wrap">
            <div class="search-btn" onclick="openSearch()">
                <img src="/images/search.svg" alt="search" width="30px" />
            </div>
            <div id="searchModal" class="search-modal hidden">
                <div class="modal-box">
                    <div class="modal-topbar">
                        <div></div>
                        <button class="modal-cancel" onclick="closeSearch()">취소</button>
                    </div>

                    <input type="text" class="search-input" placeholder="브랜드, 상품, 프로필 등" />

                    <h3 class="section-title">추천 검색어</h3>
                    <div class="keyword-wrap">
                        <button class="keyword">뉴발란스</button>
                        <button class="keyword">워터밤</button>
                        <button class="keyword">일렉기타</button>
                        <button class="keyword">아디다스</button>
                        <button class="keyword">샌들</button>
                    </div>
                </div>
            </div>
            <!-- 로그인 상태일 때 -->
            <button th:if="${isLoggedIn}" class="login-btn" onclick="location.href='/api/user/logout'">로그아웃</button>

            <!-- 비로그인 상태일 때 -->
            <button th:unless="${isLoggedIn}" class="login-btn" onclick="location.href='/api/user/login'">로그인</button>

        </div>
    </header>
    <main class="content">
        <div class="tabs">
            <a href="/api/product/createProduct" class="tab">상품 등록</a>
            <div class="tab active">상품 관리</div>
        </div>

        <form action="/api/product/management" method="get" class="filters">
            <input type="text" name="keyword" placeholder="상품명을 입력해주세요.">
            <select>
                <option>10개씩</option>
                <option>20개씩</option>
            </select>
            <select>
                <option>전체</option>
                <option>판매 중</option>
                <option>판매 완료</option>
            </select>
        </form>

        <table>
            <thead>
            <tr>
                <th>사진</th>
                <th>상품명</th>
                <th>가격</th>
                <th>상태</th>
                <th>등록일</th>
                <th>삭제</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product : ${products}">
                <td>
                    <img th:src="@{/uploads/images/{img}(img=${product.imagePath})}" alt="상품 이미지" width="80" height="80" />
                </td>

                <td th:text="${product.name}">Macbook Pro</td>
                <td th:text="${#numbers.formatInteger(product.productPrice, 3, 'COMMA')} + ' 원'">2,000,000 원</td>
                <td>
                    <span th:text="${product.status.displayName}" th:class="'status ' + ${product.status}">판매중</span>
                </td>
                <td th:text="${#temporals.format(product.createdAt, 'yyyy-MM-dd')}">2025-06-19</td>
                <td>
                    <form th:action="@{/api/product/delete/{id}(id=${product.productId})}" method="post" onsubmit="return confirm('정말 삭제하시겠습니까?');">
                        <button type="submit" style="background: none; color: #007bff; text-decoration: underline; border: none; padding: 0; cursor: pointer; font-size: 14px;">
                            삭제하기
                        </button>
                    </form>
                </td>
            </tr>

            <!-- 상품이 없을 경우 -->
            <tr th:if="${#lists.isEmpty(products)}">
                <td colspan="6" style="text-align: center;  padding: 40px 0;">등록한 상품이 없습니다.</td>
            </tr>
            </tbody>
        </table>


        <div class="pagination" th:if="${totalPages > 0}">
    <span th:each="i : ${#numbers.sequence(1, totalPages)}"
          th:text="${i}"
          th:classappend="${i == currentPage} ? 'active' : ''"
          th:onclick="|location.href='?page=${i}'|"
          style="cursor: pointer;">
        1
    </span>
        </div>
    </main>
    <!-- 푸터 -->
    <footer>
        <div class="footer-wrapper">
            <div class="footer-top">
                <div class="column">
                    <h4>이용안내</h4>
                    <ul>
                        <li>이용정책</li>
                        <li>패널티 정책</li>
                        <li>가이드 라인</li>
                    </ul>
                </div>
                <div class="column">
                    <h4>고객지원</h4>
                    <ul>
                        <li>공지사항</li>
                        <li>서비스 소개</li>
                        <li>스토어 안내</li>
                    </ul>
                </div>
                <div class="column last">
                    <h4>고객센터 <strong>1588-0000</strong></h4>
                    <p>운영시간 평일 10:00 - 18:00 (토,일,공휴일 휴무)</p>
                    <p>점심시간 평일 13:00-14:00</p>
                    <p>1:1 문의하기는 온라인에서만 가능합니다</p>
                    <button>자주 묻는 질문</button>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="left">
                    <p>
                        경매마당 대표 : 동덕여자대학교 우당탕탕<br />
                        사업자 : 박슬기, 한지혜, 조혜진<br />
                        대표 연락처 : 20221881@dongduk.ac.kr<br />
                        사업장소재지 : 서울특별시 성북구 화랑로13길 60
                    </p>
                </div>
                <div class="right">
                    <div class="footer-icons">
                        <img src="/images/insta.svg" alt="인스타">
                        <img src="/images/face.svg" alt="페이스북">
                        <img src="/images/kakao.svg" alt="카카오">
                    </div>
                    <p>ⓒ 우당탕조</p>
                </div>
            </div>
        </div>
    </footer>
</div>
<script src="/js/main.js"></script>
</body>
</html>
